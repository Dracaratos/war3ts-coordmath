import {WCEventQueue} from "./EventQueue";

export class TimedEvent {
    private time: number;
    private func: () => void;
    private endtime: number | undefined;

    constructor(func: () => void, time: number) {
        this.time = time;
        this.func = () => func();
    }


    public AttemptAction(currentTick: number, eventQueue: WCEventQueue): boolean {
        if (!this.endtime) {
            this.endtime = ((currentTick + this.time) % 100000) - 1;
            if (this.endtime < 0) {
                this.endtime = 0;
            }
        }
        if (this.endtime <= currentTick) {
            eventQueue.AddMed(() => this.func());
            return true;
        }
        return false;
    }
}
